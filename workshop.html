<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Brian Mc Donald">
<meta name="dcterms.date" content="2025-10-29">

<title>Workshop on Registration and Beneficiary Data Interoperability</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-7cc238cd67d144c2e6e8ce0eb6041ce1.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="quarto-light">

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#terms-of-reference" id="toc-terms-of-reference" class="nav-link active" data-scroll-target="#terms-of-reference">Terms of Reference</a></li>
  <li><a href="#background" id="toc-background" class="nav-link" data-scroll-target="#background">1. Background</a></li>
  <li><a href="#objectives" id="toc-objectives" class="nav-link" data-scroll-target="#objectives">2. Objectives</a></li>
  <li><a href="#expected-outcomes" id="toc-expected-outcomes" class="nav-link" data-scroll-target="#expected-outcomes">3. Expected Outcomes</a></li>
  <li><a href="#target-participants" id="toc-target-participants" class="nav-link" data-scroll-target="#target-participants">4. Target Participants</a></li>
  <li><a href="#workshop-agenda" id="toc-workshop-agenda" class="nav-link" data-scroll-target="#workshop-agenda">5. Workshop Agenda</a>
  <ul class="collapse">
  <li><a href="#registration-and-opening-session" id="toc-registration-and-opening-session" class="nav-link" data-scroll-target="#registration-and-opening-session"><strong>09:00 - 09:30 | Registration and Opening Session</strong></a></li>
  <li><a href="#session-1-90-minutes" id="toc-session-1-90-minutes" class="nav-link" data-scroll-target="#session-1-90-minutes"><strong>09:30 - 11:00 | Session 1 (90 minutes)</strong></a></li>
  <li><a href="#coffee-break-30-minutes" id="toc-coffee-break-30-minutes" class="nav-link" data-scroll-target="#coffee-break-30-minutes"><strong>11 - 11:30 | Coffee Break (30 minutes)</strong></a></li>
  <li><a href="#session-2-90-minutes" id="toc-session-2-90-minutes" class="nav-link" data-scroll-target="#session-2-90-minutes"><strong>11:30 13:00 | Session 2 (90 minutes)</strong></a></li>
  <li><a href="#recap-next-steps-closing" id="toc-recap-next-steps-closing" class="nav-link" data-scroll-target="#recap-next-steps-closing"><strong>13:00 - 14:00 | Recap, Next Steps &amp; Closing</strong></a></li>
  <li><a href="#task-force-discussion-20-minutes" id="toc-task-force-discussion-20-minutes" class="nav-link" data-scroll-target="#task-force-discussion-20-minutes"><strong>13:30 - 13:50 | Task Force Discussion (20 minutes)</strong></a></li>
  </ul></li>
  <li><a href="#methodology" id="toc-methodology" class="nav-link" data-scroll-target="#methodology">7. Methodology</a></li>
  <li><a href="#logistical-arrangements" id="toc-logistical-arrangements" class="nav-link" data-scroll-target="#logistical-arrangements">8. Logistical Arrangements</a>
  <ul class="collapse">
  <li><a href="#venue-requirements" id="toc-venue-requirements" class="nav-link" data-scroll-target="#venue-requirements"><strong>Venue Requirements:</strong></a></li>
  <li><a href="#catering" id="toc-catering" class="nav-link" data-scroll-target="#catering"><strong>Catering:</strong></a></li>
  <li><a href="#materials" id="toc-materials" class="nav-link" data-scroll-target="#materials"><strong>Materials:</strong></a></li>
  </ul></li>
  <li><a href="#roles-and-responsibilities" id="toc-roles-and-responsibilities" class="nav-link" data-scroll-target="#roles-and-responsibilities">9. Roles and Responsibilities</a>
  <ul class="collapse">
  <li><a href="#organizing-team" id="toc-organizing-team" class="nav-link" data-scroll-target="#organizing-team"><strong>Organizing Team:</strong></a></li>
  <li><a href="#facilitators" id="toc-facilitators" class="nav-link" data-scroll-target="#facilitators"><strong>Facilitators:</strong></a></li>
  <li><a href="#presenters" id="toc-presenters" class="nav-link" data-scroll-target="#presenters"><strong>Presenters:</strong></a></li>
  <li><a href="#tool-demonstrators" id="toc-tool-demonstrators" class="nav-link" data-scroll-target="#tool-demonstrators"><strong>Tool Demonstrators:</strong></a></li>
  <li><a href="#participants" id="toc-participants" class="nav-link" data-scroll-target="#participants"><strong>Participants:</strong></a></li>
  </ul></li>
  <li><a href="#documentation-and-follow-up" id="toc-documentation-and-follow-up" class="nav-link" data-scroll-target="#documentation-and-follow-up">10. Documentation and Follow-up</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Workshop on Registration and Beneficiary Data Interoperability</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Brian Mc Donald </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 29, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="terms-of-reference" class="level1">
<h1>Terms of Reference</h1>
<p><strong>Location:</strong> South Sudan</p>
<p><strong>Date:</strong> 19 November 2025</p>
<p><strong>Time:</strong> 09:00 - 14:00 (5 hours)</p>
<p><strong>Organizer:</strong> IOM</p>
<p><strong>Co-funded by:</strong> European Union Humanitarian Aid</p>
</section>
<section id="background" class="level1">
<h1>1. Background</h1>
<p>The humanitarian community in South Sudan faces significant challenges related to beneficiary registration and data management. Current systems operate in silos, leading to inefficient referrals, duplicated beneficiary lists, inconsistent vulnerability criteria, and limited data sharing capabilities. These issues prevent effective coordination and increase the burden on crisis-affected populations who must register multiple times with different organizations.</p>
<p>The Interoperable Data Ecosystem for Humanitarian Assistance (IDEHA) initiative seeks to address these challenges by promoting standardization, interoperability, and shared resources across humanitarian actors. Building on the mapping exercises and consultations conducted in 2025, this workshop aims to move from analysis to action by developing practical tools and frameworks for improved registration data interoperability.</p>
</section>
<section id="objectives" class="level1">
<h1>2. Objectives</h1>
<p>The workshop aims to:</p>
<ul>
<li>Present findings from recent assessments of registration practices, data sharing patterns, and system capabilities among humanitarian actors in South Sudan</li>
<li>Build consensus around common registration standards and data sharing protocols</li>
<li>Begin co-development of practical tools including a Single Registration Form, Data Protection Impact Assessment template, and Data Sharing Agreement template</li>
<li>Explore the establishment of a Task Force on registration data interoperability</li>
<li>Demonstrate available technological solutions for beneficiary management and data sharing</li>
<li>Foster collaboration and commitment among humanitarian actors toward a federated approach to beneficiary data management</li>
</ul>
</section>
<section id="expected-outcomes" class="level1">
<h1>3. Expected Outcomes</h1>
<p>By the end of the workshop, participants will have:</p>
<ul>
<li>Shared understanding of the current state of registration practices and data sharing in South Sudan</li>
<li>Draft Single Registration Form incorporating common data points across organizations</li>
<li>Identify main component of a Data Protection Impact Assessment (DPIA) template tailored to the South Sudan context</li>
<li>Draft Data Sharing Agreement (DSA) template outlining principles and protocols for inter-agency data exchange</li>
<li>Decision or roadmap regarding the establishment of a Task Force on registration data interoperability</li>
<li>Increased awareness of available beneficiary management tools and their interoperability capabilities</li>
<li>Commitment to next steps in the improvement of interoperability</li>
</ul>
</section>
<section id="target-participants" class="level1">
<h1>4. Target Participants</h1>
<p><strong>Primary Participants (Approx 30 people):</strong></p>
<ul>
<li>Technical registration and information management staff from UN agencies, INGOs, and NGOs implementing cash and voucher assistance or other humanitarian programs in South Sudan</li>
<li>Programme Managers for Cash programmes.</li>
<li>Cluster coordinators</li>
<li>Data protection and legal officers from humanitarian organizations</li>
</ul>
<p><strong>Resource Persons:</strong></p>
<ul>
<li>IOM DTM and regional Registration focal-point.</li>
<li>Representatives from tool providers (BRaVE, SCOPE, Red Rose, CommCare)</li>
<li>Data protection specialists</li>
<li>Registration and CVA technical experts</li>
</ul>
</section>
<section id="workshop-agenda" class="level1">
<h1>5. Workshop Agenda</h1>
<section id="registration-and-opening-session" class="level2">
<h2 class="anchored" data-anchor-id="registration-and-opening-session"><strong>09:00 - 09:30 | Registration and Opening Session</strong></h2>
<ul>
<li>Participant registration and coffee</li>
<li>Welcome remarks and workshop objectives</li>
<li>Introduction to the data interoperability challenge</li>
<li>CCD and DIGID</li>
</ul>
</section>
<section id="session-1-90-minutes" class="level2">
<h2 class="anchored" data-anchor-id="session-1-90-minutes"><strong>09:30 - 11:00 | Session 1 (90 minutes)</strong></h2>
<ul>
<li><strong>Presentation 1:</strong> <strong>(40 minutes)</strong>
<ul>
<li>Registration Actors Survey Findings (15 min)</li>
<li>Current registration practices, standards, and gaps</li>
<li>Q&amp;A (5 min)</li>
</ul></li>
<li><strong>Breakout 1: (50 minutes)</strong>
<ul>
<li>3 to 4 groups working on the following questions:
<ul>
<li>What does an ideal humanitarian registration and beneficiary data ecosystem look like.</li>
<li>What are the biggest challenges organizations face when doing registration and managing data.</li>
<li>How impacts would a ideal registration ecosystem have on your own organizations work and the response as a whole?</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="coffee-break-30-minutes" class="level2">
<h2 class="anchored" data-anchor-id="coffee-break-30-minutes"><strong>11 - 11:30 | Coffee Break (30 minutes)</strong></h2>
<ul>
<li>During the lunch break (13:00 - 13:30), parallel demonstration sessions will be available for participants interested in specific tools. Each session will be 20-25 minutes.</li>
</ul>
</section>
<section id="session-2-90-minutes" class="level2">
<h2 class="anchored" data-anchor-id="session-2-90-minutes"><strong>11:30 13:00 | Session 2 (90 minutes)</strong></h2>
<ul>
<li><strong>Presentation 2:</strong> <strong>(30 minutes)</strong>
<ul>
<li>User/registration data journey</li>
<li>Data Sharing Agreement network graph</li>
<li>Analysis of Registration Form Data Point Overlaps</li>
<li>Q&amp;A (5 min)</li>
</ul></li>
<li><strong>Breakout 2:</strong> Working sessions of SRF (45 minutes)
<ul>
<li>Group A: Single Registration Form group</li>
<li>Group B: Data Sharing Agreement group</li>
<li>Group C: Data Protection Impact Assessment template</li>
<li>Report to plenary (15 min- 5 minutes for each group)</li>
</ul></li>
</ul>
</section>
<section id="recap-next-steps-closing" class="level2">
<h2 class="anchored" data-anchor-id="recap-next-steps-closing"><strong>13:00 - 14:00 | Recap, Next Steps &amp; Closing</strong></h2>
</section>
<section id="task-force-discussion-20-minutes" class="level2">
<h2 class="anchored" data-anchor-id="task-force-discussion-20-minutes"><strong>13:30 - 13:50 | Task Force Discussion (20 minutes)</strong></h2>
<ul>
<li>Recap</li>
<li>Proposal for a Task Force on Registration Data Interoperability</li>
<li>Summary of agreements and commitments</li>
<li>Timeline for finalizing draft documents</li>
<li>Closing remarks</li>
</ul>
</section>
</section>
<section id="methodology" class="level1">
<h1>7. Methodology</h1>
<p>The workshop will employ participatory and collaborative methodologies including:</p>
<ul>
<li>Presentation of evidence-based findings</li>
<li>Small group working sessions with structured facilitation</li>
<li>Plenary discussions and consensus-building</li>
<li>Hands-on tool demonstrations</li>
<li>Action-oriented planning</li>
</ul>
<p>All sessions will be facilitated to ensure inclusive participation and practical outputs.</p>
</section>
<section id="logistical-arrangements" class="level1">
<h1>8. Logistical Arrangements</h1>
<section id="venue-requirements" class="level2">
<h2 class="anchored" data-anchor-id="venue-requirements"><strong>Venue Requirements:</strong></h2>
<ul>
<li>Main plenary room with capacity for 30-40 people</li>
<li>Three breakout rooms for parallel working sessions</li>
<li>Four spaces for tool demonstration side sessions</li>
<li>AV equipment (projector, screen, microphone, sound system)</li>
<li>Flipcharts, markers, and sticky notes for working groups</li>
</ul>
</section>
<section id="catering" class="level2">
<h2 class="anchored" data-anchor-id="catering"><strong>Catering:</strong></h2>
<ul>
<li>Morning coffee/tea upon arrival</li>
<li>Mid-morning coffee/tea break</li>
</ul>
</section>
<section id="materials" class="level2">
<h2 class="anchored" data-anchor-id="materials"><strong>Materials:</strong></h2>
<ul>
<li>Workshop agenda and participant list</li>
<li>Presentation materials (digital and printed)</li>
<li>Pre-workshop survey findings and analysis documents</li>
<li>Draft templates for working groups</li>
<li>Notebooks and pens for participants</li>
</ul>
</section>
</section>
<section id="roles-and-responsibilities" class="level1">
<h1>9. Roles and Responsibilities</h1>
<section id="organizing-team" class="level2">
<h2 class="anchored" data-anchor-id="organizing-team"><strong>Organizing Team:</strong></h2>
<ul>
<li>Overall coordination and logistics</li>
<li>Facilitator recruitment and briefing</li>
<li>Preparation of presentation materials and draft templates</li>
<li>Coordination with tool providers for demonstrations</li>
<li>Documentation and report writing</li>
</ul>
</section>
<section id="facilitators" class="level2">
<h2 class="anchored" data-anchor-id="facilitators"><strong>Facilitators:</strong></h2>
<ul>
<li>Lead plenary sessions</li>
<li>Facilitate working group discussions</li>
<li>Ensure inclusive participation and time management</li>
<li>Capture key outputs and recommendations</li>
</ul>
</section>
<section id="presenters" class="level2">
<h2 class="anchored" data-anchor-id="presenters"><strong>Presenters:</strong></h2>
<ul>
<li>Prepare and deliver presentations on findings</li>
<li>Respond to questions and clarifications</li>
</ul>
</section>
<section id="tool-demonstrators" class="level2">
<h2 class="anchored" data-anchor-id="tool-demonstrators"><strong>Tool Demonstrators:</strong></h2>
<ul>
<li>Prepare demonstration materials</li>
<li>Conduct side sessions during lunch</li>
<li>Respond to technical questions</li>
</ul>
</section>
<section id="participants" class="level2">
<h2 class="anchored" data-anchor-id="participants"><strong>Participants:</strong></h2>
<ul>
<li>Active engagement in all sessions</li>
<li>Contribution of organizational perspectives and expertise</li>
<li>Commitment to follow-up actions</li>
</ul>
</section>
</section>
<section id="documentation-and-follow-up" class="level1">
<h1>10. Documentation and Follow-up</h1>
<p>The organizing team will produce:</p>
<ul>
<li>Workshop report including key discussions, decisions, and recommendations</li>
<li>Revised drafts of the Single Registration Form, DPIA template, and DSA template incorporating workshop feedback</li>
<li>Action plan with timeline and responsible actors</li>
<li>Participant list and contact database</li>
</ul>
<p><strong>Follow-up Actions:</strong></p>
<ul>
<li>Circulation of workshop report within two weeks</li>
<li>Online consultation period for draft document refinement</li>
<li>Establishment of Task Force (if agreed)</li>
<li>Planning of next workshop or technical working sessions</li>
</ul>
<p><strong>Contact Information:</strong> [Name] [Title] [Organization] [Email] [Phone]</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "î§‹";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>